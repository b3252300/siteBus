import{L as d}from"./MapLayout.vue_vue_type_style_index_0_scoped_d1807789_lang-CFDAK7Ip.js";import{_ as v,u as Q,k as u,o as U,D as k,c as L,b as A,j as y,G as E,H as C,m as S,a as g,w as m,d as B,e as R,g as b,B as w,I as c,y as f,J as x,f as z,A as F,C as J}from"./index-B9shPAHu.js";const V="data:image/png;base64,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",j="/sitemap/assets/Vector-icon-2x-C5iARE16.png",Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAkCAYAAADsHujfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAN8SURBVHgBxVdLa9RQFD43N8k0zqB0NDBSdKHjgxZsRUXduVV0GfciiLjzH/grqrQKrs1GqVQERXduFGrrFMTSSml1cGyntalpHvdec0ozTuZhMybtfJsh557J/e7JeXyXQAownhj06/i67meUvOCeijZZlm1FcOtXQauU7pnudu+gkAL2HCge9wnvBcFr7+OcK74QWbrm6X1nT6r5a4N25e00g50i0n/TyBPhHPiXjwChIaFDp47Bt4kvVisfCRKiJ+Pk261RQpcpyc4RXywSSXE9BQqDt6/2tfKVISEEI2orOyPAJkbG5utMlYE7VwqKxwtnbl2jH6JrySOiMG63sstENOVDaXi8LKhUYYLlGyOTmIhQWUsighN14I6Ra7QfX9LKGC3CuF6/npgI91273ZrKrMNY2vU20zSZxqkVrqdCZOCeoXKS7Wu3jlGZeW2dQL96u0clLVwPo0IgBjZPZQINTuPWk1C/u8WwgW0HLuhqJviMzJFzXPJz9fbJh2NzbYlcCpiu+Rt5F9g+Kv72G+yYggmbUKL5vq9BQmC+TI2MTzWVL55+9tVG34q3vtkfGjve1uYa+JAKwkM2EZl74xSD8kp80rjAiOBvJFnPBQ0njXB3AhXoaoSIYRjUZ0oedhEYjY1qTzlCZLa3motbAf+zISZ5/bOkyBavZj+XtiqxliOSrGrMgx1BtZqdWTDNTSIDhqGWzGZ9UouIy6VUtEkjXM7mQxKIViQiRFSJM0gZngfl6Ucvl+P41oisZ7LbyrlOsacD3xoRsgAWpAw/I2JXYY0IfjvMZEgRONSCthCrEiMNTdjeKqSMaR06J1K0csuoLaELiBBB0eJSdR66gCZhVBo2rUBtlyEl9F8CO45fS4WGItcLrgKQEDxo6+Z1M1Z/aiKCyuviXUMrBXIfFTckQNZ1Yv8/0tZRFFmfnKO24+j6+aHfU/efLh0cLDIW3JKkDvUtHuL96Isfcf0jRLTeo4cYZ3txU8q9/P4LQ9bk6LMV/cjQihpIb7w6xnkpkvj44PkidICaZkVRFMyGQviMc6L0eDyStDg59+63dY9IuUYBhaNdCXLCgUwZEx46BGlFIs6JUEi9C2blPj2IagXcdlM1NpHTNy7rQia1u0ko72GXIdWTQBV1YrWnOw0tVNFEEq79MzOH3RW6AFmF7PyGAqy/Ana3SCD+AA+QmRpgc6JZAAAAAElFTkSuQmCC",O={__name:"LeafletMap",props:{center:{type:Array,default:()=>[23,120.2]},zoom:{type:Number,default:12}},setup(s,{expose:i}){const t=Q(),e=u(null),n=u(null);let a=null;const l=s,I=d.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}}),M=new I({iconUrl:V,iconRetinaUrl:j,shadowUrl:Y}),h=o=>{if(!o)return'<div class="tooltipHTML">等待登入...</div>';const r=o.google?.picture,p=o.facebook?.picture;return`
    <div class="tooltipHTML">
      ${r||p?`
          <div class="tooltipHTML__img">
            ${r?`<img src="${r}" class="avatar-img">`:""}
            ${p?`<img src="${p}" class="avatar-img" style="margin-left: -10px">`:""}
          </div>
        `:'<div style="font-size:12px; color:gray;">無圖片</div>'}
      <span style="font-weight: bold; font-size: 14px; display:block; ">我底加啦!</span>
    </div>
  `};return U(()=>{n.value=d.map(e.value).setView(l.center,l.zoom),d.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap"}).addTo(n.value),a=d.marker(l.center,{icon:M,opacity:0,interactive:!1}).addTo(n.value);const o=h(t.user);console.log(t.user,"authStore.user"),(t.user.facebook.id!==null||t.user.google.id!==null)&&a.bindTooltip(o,{permanent:!0,direction:"top",className:"user-location-tooltip",offset:[0,-35]}).openTooltip()}),k(()=>t.user,o=>{if(!a)return;console.log("資料更新，更新 Tooltip:",o);const r=h(o);a.setTooltipContent(r)},{deep:!0}),i({getMap:()=>n.value}),(o,r)=>(A(),L("div",{ref_key:"mapRef",ref:e,class:"leaflet-map"},null,512))}},K=v(O,[["__scopeId","data-v-e4bf604e"]]),T={key:0,class:"default-container"},D=y({__name:"MapLayout",props:{width:{},height:{}},setup(s){const i=E();C();const t=s;return(e,n)=>{const a=g("el-main"),l=g("el-container");return A(),S(l,{class:"map-layout"},{default:m(()=>[B("div",{class:"layout-container",style:w({height:t.height})},[B("aside",{class:"map-layout__sidebar",style:w({width:t.width,flex:`0 0 ${t.width}`})},[c(e.$slots,"sidebar",{},void 0,!0)],4),f(i).default?(A(),L("div",T,[c(e.$slots,"default",{},void 0,!0)])):b("",!0)],4),R(a,{class:"map-wrapper"},{default:m(()=>[c(e.$slots,"map",{},void 0,!0)]),_:3})]),_:3})}}}),W=v(D,[["__scopeId","data-v-d1807789"]]),q=x("loading",()=>{const s=u(!1);function i(){s.value=!1}function t(){s.value=!0}return{loading:s,closeLoading:i,openLoading:t}}),G=y({__name:"BusSidebar",setup(s){const i=C(),t=q();return(e,n)=>{const a=g("el-scrollbar"),l=F("loading");return A(),L("div",{class:J(["sidebar",{active:f(i).sidebarOpen}])},[c(e.$slots,"top",{},void 0,!0),z((A(),S(a,{style:{padding:"10px",width:"100%"}},{default:m(()=>[c(e.$slots,"default",{},void 0,!0)]),_:3})),[[l,f(t).loading]])],2)}}}),X=v(G,[["__scopeId","data-v-48d68580"]]);export{X as B,K as L,W as M,V as a,j as i,Y as s,q as u};
